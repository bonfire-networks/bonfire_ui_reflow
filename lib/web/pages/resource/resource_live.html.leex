<main class="lg:flex">
  <section class="min-h-screen bg-white rounded-lg dark:bg-gray-700 w-center shadow-tick">
    <%= live_component(@socket, Bonfire.UI.Social.PageHeaderLive, assigns_clean(assigns)) %>
    <%= live_component(@socket, Bonfire.UI.ValueFlows.ResourceHeroLive, assigns_clean(assigns)) %>
    <%= live_component(@socket, Bonfire.UI.ValueFlows.ResourceNavigationLive, assigns_clean(assigns)) %>

    <%= for event <- e(assigns, :feed, []) do %>
      <%= live_component(
          @socket,
          Bonfire.UI.Social.ActivityLive,
          activity: event
        ) %>
    <% end %>

  </section>

  <aside class="flex-1 hidden mt-2 lg:flex md:flex-shrink-0">
    <div class="flex flex-col w-full h-full px-3 space-y-4">
      <%= for component <- Bonfire.Common.Config.get([:ui, :resource, :widgets], [
      Bonfire.UI.Social.SubscribeWidgetLive,
      Bonfire.UI.ValueFlows.LocationWidgetLive,
      Bonfire.UI.ValueFlows.PrimaryAccountableWidgetLive,
   ]) do %>
        <%=
          live_component(
            @socket,
            component,
            assigns_merge(assigns,
            location: e(@resource, :current_location, nil),
            primary_accountable: e(@resource, :primary_accountable, nil),
            tags: e(@resource, :tags, [])
            )
          )
        %>
      <% end %>
    </div>
  </aside>
</main>
