<main class="lg:flex">
  <section class="w-center min-h-screen shadow-tick bg-white mt-4 rounded-lg">
    <%= live_component(@socket, Bonfire.UI.Social.PageHeaderLive, assigns_clean(assigns)) %>
    <%= live_component(@socket, Bonfire.UI.ValueFlows.ResourceHeroLive, assigns_clean(assigns)) %>
    <%= live_component(@socket, Bonfire.UI.ValueFlows.ResourceNavigationLive, assigns_clean(assigns)) %>

    <%= for event <- e(@resource, :trace, []) do %>
      <%= live_component(
          @socket,
          Bonfire.UI.Social.ActivityLive,
          activity: event,
          current_user: @current_user
        ) %>
    <% end %>

  </section>

  <aside class="flex-1 hidden mt-2 lg:flex md:flex-shrink-0">
    <div class="h-full px-3 w-full">
      <%= for component <- Bonfire.Common.Config.get([:ui, :resource, :widgets], [
      Bonfire.UI.Social.SubscribeWidgetLive,
      Bonfire.UI.ValueFlows.LocationWidgetLive,
      Bonfire.UI.ValueFlows.PrimaryAccountableWidgetLive,
      Bonfire.UI.Social.HashtagsWidgetLive,
   ]) do %>
        <%=
          live_component(
            @socket,
            component,
            assigns_merge(assigns,
            location: e(@resource, :current_location, nil),
            primary_accountable: e(@resource, :primary_accountable, nil),
            tags: e(@resource, :tags, [])
            )
          )
        %>
      <% end %>
    </div>
  </aside>
</main>
